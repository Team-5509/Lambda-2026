#!/usr/bin/env bash
set -euo pipefail

# Always run from repository root.
cd "$(git rev-parse --show-toplevel)"

if [[ "${PRE_COMMIT_SKIP_GRADLE_BUILD:-false}" == "true" ]]; then
    echo "[pre-commit] Skipping Gradle checks because PRE_COMMIT_SKIP_GRADLE_BUILD=true"
else
    echo "[pre-commit] Running Gradle checks (./gradlew check)..."
    ./gradlew check
fi
